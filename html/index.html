<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>wetl</title>

    <link href="css/app.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar">
      <div class="container">        
        <ul class="nav">
          <li class="active"><a href="index.html">wetl</a></li>
          <li><a href="settings.html">settings</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <link href="traffic-light/traffic-light.css" rel="stylesheet">
      <div class="traffic-light" data-state="red"></div>
    </div>

    <script src="js/jquery.custom.min.js"></script>
    <script src="traffic-light/traffic-light.js"></script>    
    <script>
    $(window).on('load', function() {
      $('.traffic-light').on('toggle', function(e, state) {      
        var data = (state == "red") ? 0 : 1;
        $.post('/led.cgi', { state: data });
      });
      
      $.get('/led.cgi', function(data) {
        var state = (data.state == 0) ? "red" : "green";
        $('.traffic-light').trafficLight('setState', state)
      });
    });
    </script>
  </body>
</html>
